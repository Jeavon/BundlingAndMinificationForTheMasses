<form novalidate name="insertMacroForm" ng-submit="submitForm()" ng-controller="Umbraco.Dialogs.InsertMacroController" val-form-manager>
    <div class="umb-panel">        

        <div class="umb-panel-footer">
                <div class="btn-toolbar umb-btn-toolbar pull-right">
                    <button type="button" class="btn btn-link" ng-click="close()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Ok</button>
                </div>
        </div>

        <div class="umb-panel-body no-header umb-scrollable" auto-scale="1" ng-switch="wizardStep">
            
            <umb-control-group label="Choose a macro" ng-switch-when="macroSelect">
                <select class="umb-editor" ng-change="submitForm()" name="selectedMacro" ng-model="$parent.$parent.selectedMacro" ng-options="m as m.name for m in macros" required>
                    <option value="">Choose macro...</option>
                </select>
                <span class="help-inline" val-msg-for="selectedMacro" val-toggle-msg="required">Required</span>
            </umb-control-group>


            <div class="umb-pane" ng-switch-when="paramSelect">

                <h5>{{$parent.$parent.selectedMacro.name}}</h5>

                <ul class="unstyled">
                    <li ng-repeat="param in $parent.macroParams">
                        
                        <umb-control-group label="{{param.name}}">
                            <umb-editor model="param"></umb-editor>
                        </umb-control-group>
                        
                    </li>
                </ul>

            </div>

        </div>

    </div>
</form>
